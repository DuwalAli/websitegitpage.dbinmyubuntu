<!DOCTYPE html>
<html>
<head>
    <title>Dashboard</title>
    <style>
        body { font-family: Arial; background:#eef2f3; padding:20px; }
        .box {
            background:white; width:400px; margin:auto; padding:20px;
            border-radius:10px; box-shadow:0 0 10px #aaa;
        }
        button {
            width:100%; padding:10px; margin-top:10px;
            background:#007bff; border:none; color:white;
            border-radius:5px;
        }
    </style>
</head>

<body>
<div class="box">
    <h2>Dashboard</h2>
    <p id="stats">Loading...</p>

    <button onclick="refreshStats()">Refresh Stats</button>
    <button onclick="window.location.href='upload.html'">Upload PDF</button>
    <button onclick="logout()">Logout</button>
</div>

<script>
if (!localStorage.getItem("token")) {
    window.location.href = "index.html";
}

function refreshStats() {
    fetch("http://192.168.56.101:5000/stats")
        .then(res => res.json())
        .then(data => {
            document.getElementById("stats").innerHTML =
                "CPU: " + data.cpu + "%<br>" +
                "RAM: " + data.ram + "%<br>" +
                "Disk: " + data.disk + "%<br>" +
                "PDF Count: " + data.pdf_count;
        });
}

refreshStats();

function logout() {
    localStorage.removeItem("token");
    window.location.href = "index.html";
}
</script>

</body>
</html>
